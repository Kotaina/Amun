<template>
  <ToggleButton />
</template>

<script>
import ToggleButton from "./ToggleButton.vue";
export default {
  name: "HelloWorld",
  components: {
    ToggleButton,
  },
  props: {
    msg: String,
  },

  mounted() {
    console.log("mounted");
    // openSocket() {
    const wsURL =
      "wss://demo.piesocket.com/v3/channel_1?api_key=VCXCEuvhGcBDP7XhiJJUDvR1e1D3eiVjgZ9VRiaV&notify_self";
    const protocols = [];
    const myWS = new WebSocket(wsURL, protocols);
    // myWS
    console.log("myWS.readyState", myWS); // CONNECTING

    // –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ (Handshake) –ø—Ä–æ–π–¥–µ—Ç —É—Å–ø–µ—à–Ω–æ
    // readyState –±—É–¥–µ—Ç OPEN
    console.log("myWS.readyState", myWS.readyState); // OPEN
    // },

    myWS.onopen = function () {
      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ WS
      myWS.send("–ü—Ä–∏–≤–µ—Ç, —Å–µ—Ä–≤–µ—Ä!");
    };
    myWS.onmessage = (event) => {
      // –î–µ–ª–∞–µ–º —Å –¥–∞–Ω–Ω—ã–º–∏ –≤—Å–µ —á—Ç–æ –∑–∞—Ö–æ—Ç–∏–º, –Ω–æ —è –∏—Ö –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–µ–¥—Éüòä
      console.log(event.data);
    };
  },
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
h3 {
  margin: 40px 0 0;
}
ul {
  list-style-type: none;
  padding: 0;
}
li {
  display: inline-block;
  margin: 0 10px;
}
a {
  color: #42b983;
}
</style>
